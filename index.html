<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Bol by avdgaag</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/avdgaag/bol">View On GitHub</a></li>
          <li class="fork"><a href="http://avdgaag.github.com/bol/doc">API docs</a></li>
          <li class="downloads"><a href="https://github.com/avdgaag/bol/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/avdgaag/bol/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Bol</h1>
          <p>A simple Ruby wrapper around the bol.com developer API</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/avdgaag">avdgaag</a> <a href="http://travis-ci.org/avdgaag/bol"><img src="https://secure.travis-ci.org/avdgaag/bol.png?branch=master" alt="Build Status"></a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

<p>A Ruby wrapper around the <a href="http://developers.bol.com">bol.com developers API</a>, that will be made
available as a Gem. <em>Currently in beta stage.</em></p>

<h2>Getting started</h2>

<h3>Installation</h3>

<p>Bol is a simple Ruby gem, so it requires a working installation of Ruby with
Ruby gems. Note: <strong>Ruby 1.9 is required</strong>. Install the gem:</p>

<pre><code>$ gem install bol
</code></pre>

<p>Or, if your project uses <a href="http://gembundler.com">Bundler</a> simply add it to your <code>Gemfile</code>:</p>

<div class="highlight">
<pre><span class="n">gem</span> <span class="s1">'bol'</span>
</pre>
</div>


<p>Then, simply <code>require</code> it in your code, provide some configuration settings and
query away.</p>

<h3>Configuration</h3>

<p>To be allowed to make requests to the Bol.com API you need to register on their
site and request a access key and secret. Configure the Bol gem as follows:</p>

<div class="highlight">
<pre><span class="no">Bol</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="s1">'your public access key'</span>
  <span class="n">c</span><span class="o">.</span><span class="n">secret</span> <span class="o">=</span> <span class="s1">'your private secret'</span>
  <span class="n">c</span><span class="o">.</span><span class="n">per_page</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">end</span>
</pre>
</div>


<h3>Example application</h3>

<p>See an example Sinatra application implementing basic search-and-display
functionality: <a href="https://gist.github.com/1724664">https://gist.github.com/1724664</a>.
There's <a href="http://arjanvandergaag.nl/blog/bol-gem.html">an introductory blog post</a>
to go with it.</p>

<h2>Available operations</h2>

<p>Here are the currently working operations:</p>

<h3>Loading a specific product</h3>

<p>If you know an ID, you can load a product directly:</p>

<div class="highlight">
<pre><span class="n">product</span> <span class="o">=</span> <span class="no">Bol</span><span class="o">::</span><span class="no">Product</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
<span class="n">product</span><span class="o">.</span><span class="n">title</span>
<span class="n">product</span><span class="o">.</span><span class="n">cover</span><span class="p">(</span><span class="ss">:medium</span><span class="p">)</span>
<span class="n">product</span><span class="o">.</span><span class="n">referral_url</span><span class="p">(</span><span class="s1">'my_associate_id'</span><span class="p">)</span>
</pre>
</div>


<h3>Listing products</h3>

<p>You can get a list of popular or bestselling products:</p>

<ul>
<li><code>Bol.top_products</code></li>
<li><code>Bol.top_products_overall</code></li>
<li><code>Bol.top_products_last_week</code></li>
<li><code>Bol.top_products_last_two_months</code></li>
<li><code>Bol.new_products</code></li>
<li><code>Bol.preorder_products</code></li>
</ul><p>Or, you can apply a scope to limit results to a category:</p>

<div class="highlight">
<pre><span class="no">Bol</span><span class="o">::</span><span class="no">Scope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:category_id</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">top_producs</span>
</pre>
</div>


<h3>Searching products</h3>

<p>You can search globally for keywords or ISBN and use a Arel-like syntax
for setting options:</p>

<div class="highlight">
<pre><span class="no">Bol</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:query</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="s1">'sales_ranking ASC'</span><span class="p">)</span>
<span class="no">Bol</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:query</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:page</span><span class="o">]</span><span class="p">)</span>
</pre>
</div>


<p>You can scope your search to a specific category:</p>

<div class="highlight">
<pre><span class="no">Bol</span><span class="o">::</span><span class="no">Scope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:category_id</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:query</span><span class="o">]</span><span class="p">)</span>
</pre>
</div>


<h3>Loading categories and refinements</h3>

<p>Loading all top-level categories (e.g. <code>DVDs</code> or <code>English Book</code>) is simple
enough:</p>

<div class="highlight">
<pre><span class="n">categories</span> <span class="o">=</span> <span class="no">Bol</span><span class="o">.</span><span class="n">categories</span>
<span class="n">categories</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">name</span> <span class="c1"># =&gt; 'Books'</span>
</pre>
</div>


<p>You can load subsequent subcategories:</p>

<div class="highlight">
<pre><span class="no">Bol</span><span class="o">::</span><span class="no">Scope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">categories</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">categories</span>
</pre>
</div>


<p>Refinements (e.g. 'under 10 euros') work much the same way as categories, but
are grouped under a shared name, such as group 'Price' with refinements 'up to
10 euros', '10 to 20 euros', etc.:</p>

<div class="highlight">
<pre><span class="n">groups</span> <span class="o">=</span> <span class="no">Bol</span><span class="o">.</span><span class="n">refinements</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">groups</span><span class="o">.</span><span class="n">first</span>
<span class="n">group</span><span class="o">.</span><span class="n">name</span> <span class="c1"># =&gt; 'Price'</span>
<span class="n">group</span><span class="o">.</span><span class="n">refinements</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">name</span> <span class="c1"># =&gt; 'under 10 euros'</span>
</pre>
</div>


<h3>Scoping operations</h3>

<p>The <code>Bol::Scope</code> object limits results to given categories and/or refinements.
You can create a scope using explicit IDs, and you can do basic combinations:</p>

<div class="highlight">
<pre><span class="n">books</span> <span class="o">=</span> <span class="no">Bol</span><span class="o">::</span><span class="no">Scope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">some_category_id</span><span class="p">)</span>
<span class="n">cheap</span> <span class="o">=</span> <span class="no">Bol</span><span class="o">::</span><span class="no">Scope</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">some_refinement_id</span><span class="p">)</span>
<span class="p">(</span><span class="n">books</span> <span class="o">+</span> <span class="n">cheap</span><span class="p">)</span><span class="o">.</span><span class="n">top_products</span>
</pre>
</div>


<p>Here's an overview of all the operations that should still be implemented:</p>

<h2>Background</h2>

<p>The available operations map almost directly to operations provided by the API
to search, load lists of products or load a single product by ID. I do aim to
a add a little sugar to make working with Ruby objects a little easier:</p>

<ul>
<li>Add <code>page</code> helper method to combine <code>limit</code> and <code>offset</code>
</li>
<li>Scope operations by category in a ActiveRecord association style</li>
<li>Delay API calls until explicitly requested or triggered by looping over
results</li>
</ul><h2>Wishlist</h2>

<ul>
<li>Allow scoping by category or refinement objects instead of just IDs</li>
<li>Add a simple identiy map, so the same product does not have to be loaded
twice when requested twice</li>
<li>Properly differentiate between product types. Currently built around books;
DVDs, music and toys may or may not work as expected.</li>
<li>Add default ordering of products</li>
</ul><p>I do not need this stuff myself, but I will gladly take pull requests for such
features.</p>

<h2>Note on Patches/Pull Requests</h2>

<ul>
<li>Fork the project.</li>
<li>Make your feature addition or bug fix.</li>
<li>Add tests for it. This is important so I don't break it in a future version
unintentionally.</li>
<li>Commit, do not mess with rakefile, version, or history. (if you want to have
your own version, that is fine but bump version in a commit by itself I can
ignore when I pull)</li>
<li>Send me a pull request. Bonus points for topic branches.</li>
</ul><h2>History</h2>

<p>For a full list of changes, please see CHANGELOG.md</p>

<h2>License</h2>

<p>Copyright (C) 2011 by Arjan van der Gaag. Published under the MIT license. See
LICENSE.md for details.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-20357800-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
